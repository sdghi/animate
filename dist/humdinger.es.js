function t(t,e=document){return"string"==typeof t?e.querySelector(t):t}function e(t,e=document){return"string"==typeof t?e.querySelectorAll(t):t}function n(t,e,n,i={duration:300,easing:"ease-in-out",direction:"forwards",scale:!0}){const{dx:r,dy:s,dh:o,dw:a}=function(t,e){return{dx:t.left-e.left,dy:t.top-e.top,dh:t.height/e.height,dw:t.width/e.width}}(t,e),c=n.animate([{transformOrigin:"top left",transform:`translate3d(${r}px, ${s}px, 0)  scale(${a}, ${o})`},{transformOrigin:"top left",transform:"none"}],{duration:i.duration,easing:i.easing,fill:"both"});"reverse"===i.direction?c.reverse():c.play(),i.done&&(c.onfinish=i.done)}function i(t){const e=t[0],n=t[1];return{inc:function(t,i){return t===n?e:t+i},dec:function(t,i){return t===e?n:t-i}}}function r(t,e){let n=(new Date).getTime(),i=new Object;return i.value=requestAnimationFrame((function r(){(new Date).getTime()-n>=e&&(t(),n=(new Date).getTime()),i.value=requestAnimationFrame(r)})),i}function s(t){window.cancelAnimationFrame?window.cancelAnimationFrame(t.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(t.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(t.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(t.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(t.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(t.value):clearInterval(t)}const o={root:null,rootMargin:"0px",threshold:1};class a{constructor(e){this.el=t(e)}log(){console.log("element:",this.el)}node(){return this.el}scroll(t,e,n=o){let i=new IntersectionObserver((n=>{n.forEach((n=>{const i=n.intersectionRatio;"enter"===t&&n.isIntersecting&&this.scrollEnter(e),"exit"===t&&0===i&&this.scrollExit(e)}))}),n);const r=()=>{i.observe(this.el),requestAnimationFrame(r)};requestAnimationFrame(r)}scrollExit(t){t(this.el)}scrollEnter(t){t(this.el)}click(t){this.el.addEventListener("click",(e=>{t(this.el,e)}))}}function c(t,e){const n=window.matchMedia(t);return n.matches&&e.true?e.true():e.false?e.false():void n.addEventListener("change",(t=>t.matches&&e.true?e.true():e.false?e.false():void 0))}function l(e,i,r){const s=t(e),o=s.getBoundingClientRect();i(s);n(o,s.getBoundingClientRect(),s,r)}function u(e,i,r,s){const o=t(e),a=o.getBoundingClientRect();o.style.visibility="hidden";const c=t(i);r(c);n(a,c.getBoundingClientRect(),c,s)}function d(e,i,r,s){const o=t(e),a=o.querySelectorAll(i);let c=[];Array.from(a).map((t=>{const e=t.getBoundingClientRect();c.push(e)})),r(o),a.forEach(((t,e)=>{const i=t.getBoundingClientRect();n(c[e],i,t,s)}))}const h={duration:150,easing:"linear"};function m(e,n=(()=>null),i=h){const r=t(e),s=r.clientHeight;n();g(r,s,r.clientHeight,i)}function g(t,e,n,i=h){t.animate([{transformOrigin:"top left",height:e+"px"},{transformOrigin:"top left",height:n+"px"}],i)}function f(t,e,n){t.setAttribute(`data-${e}`,n)}function w(e){const n=t(e),i=n.getAttribute("data-transition");if(n.removeAttribute("style"),!n.hasAttribute("aria-hidden")||"false"===n.getAttribute("aria-hidden"))return;const{clientHeight:r,clientWidth:s}=n;n.removeAttribute("aria-hidden"),n.style=`\n    visibility: visible;\n    height: ${r}px;\n    width: ${s}px;\n  `,f(n,i,"enter"),n.addEventListener("transitionend",(()=>{n.style=`\n    visibility: visible;\n    height: ${r}px;\n    width: ${s}px;\n    `}))}function x(e){const n=t(e),i=n.getAttribute("data-transition");"true"!==n.getAttribute("aria-hidden")&&(n.removeAttribute("style"),f(n,i,"exit"),n.setAttribute("aria-hidden","true"),n.addEventListener("transitionend",(()=>{n.style="\n    visibility: hidden;\n    height: 0px;\n    width: 0px;\n    padding: 0px;\n    "})))}function b(e){const n=t(e),i=n.getAttribute("data-transition"),r=n.getAttribute(`data-${i}`);r&&"enter"!==r?w(e):x(e)}const p={attributes:!0,childList:!0,subtree:!0,characterData:!0};function v(t,e,n=Object.assign(Object.assign({},h),p)){let i=t.clientHeight;const r=new MutationObserver((r=>{for(const s of r){const r=t.clientHeight;g(t,i,r,n),i=r,e&&e({mutation:s,element:t,beforeHeight:i,afterHeight:r})}}));return{observe:()=>r.observe(t,p),disconnect:()=>r.disconnect()}}const A={lerp:()=>console.log("lerp")};class I{constructor(n,i){this.options=i,this.el=t(n),this.items=e(i.itemSelector,this.el),this.currentIndex=this.options.start,this.timer}initTimer(){this.timer=r((()=>{this.options.timerFn()}),this.options.timer)}resetTimer(t){this.timer?(s(this.timer),this.initTimer()):t()}node(){return this.el}getItems(){return this.items}getIndex(){return this.currentIndex}getCurrent(){return{index:this.currentIndex,element:this.items[this.currentIndex]}}getNext(){const t=i([0,this.items.length-1]).inc(this.currentIndex,1);return{index:t,element:this.items[t]}}getPrevious(){const t=i([0,this.items.length-1]).dec(this.currentIndex,1);return{index:t,element:this.items[t]}}getItem(t){return{index:t,element:this.items[t]}}next(t){this.currentIndex=i([0,this.items.length-1]).inc(this.currentIndex,1),t&&t(this.currentIndex)}previous(t){this.currentIndex=i([0,this.items.length-1]).dec(this.currentIndex,1),t&&t(this.currentIndex)}log(){console.log({el:this.el,options:this.options,items:this.items,currentIndex:this.currentIndex,currentItem:this.items[this.currentIndex]})}}export{I as Gallery,a as Watcher,m as animateHeightAuto,d as animateLayout,s as clearRequestInterval,u as crossfade,h as defaultOptions,l as flip,e as getAllElements,t as getElement,i as loop,A as math,w as mount,r as requestInterval,n as runFLIP,c as screen,b as toggleMounting,g as transformHeightDeltas,x as unmount,v as watchHeightChange};
